<?php
/**
 * SimpleMedia.
 *
 * @copyright Axel Guckelsberger
 * @license http://www.gnu.org/licenses/lgpl.html GNU Lesser General Public License
 * @package SimpleMedia
 * @author Axel Guckelsberger <info@guite.de>.
 * @link http://zikula.de
 * @link http://zikula.org
 * @version Generated by ModuleStudio 0.5.5 (http://modulestudio.de) at Mon Nov 05 23:27:05 CET 2012.
 */

/**
 * This handler class handles the page events of the Form called by the simpleMedia_admin_edit() function.
 * It collects common functionality required by different object types.
 */
class SimpleMedia_Form_Handler_Admin_Edit extends SimpleMedia_Form_Handler_Admin_Base_Edit
{
    // feel free to extend the base handler class here

    /**
     * Initialise translations. OVERRIDE
     *
     * @param Zikula_EntityAccess $entity treated entity instance.
     */
    protected function initTranslationsForEdit($entity)
    {
        // retrieve translated fields
/* See https://github.com/zikula-ev/SimpleMedia/issues/76 COMMENTED OUT TRANSLATIONS
        $translatableHelper = new SimpleMedia_Util_Translatable($this->view->getServiceManager());
        $translations = $translatableHelper->prepareEntityForEdit($this->objectType, $entity);
    
        // assign translations
        foreach ($translations as $locale => $translationData) {
            $this->view->assign($this->objectTypeLower . $locale, $translationData);
        }
    
        // assign list of installed languages for translatable extension
        $this->view->assign('supportedLocales', ZLanguage::getInstalledLanguages());
*/
    }

    /**
     * Prepare update of translations. OVERRIDE
     *
     * @param Zikula_EntityAccess $entity   currently treated entity instance.
     * @param Array               $formData additional form data outside the entity scope.
     */
    protected function processTranslationsForUpdate($entity, $formData)
    {
/* See https://github.com/zikula-ev/SimpleMedia/issues/76 COMMENTED OUT TRANSLATIONS
        $entityTransClass = $this->name . '_Entity_' . ucfirst($this->objectType) . 'Translation';
        $transRepository = $this->entityManager->getRepository($entityTransClass);
    
        $translatableHelper = new SimpleMedia_Util_Translatable($this->view->getServiceManager());
        $translations = $translatableHelper->processEntityAfterEdit($this->objectType, $formData);
    
        foreach ($translations as $translation) {
            foreach ($translation['fields'] as $fieldName => $value) {
                $transRepository->translate($entity, $fieldName, $translation['locale'], $value);
            }
        }
*/
    }
}
